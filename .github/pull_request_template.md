# ストレージバケットの実装とRLSポリシーの改善

## 概要
画像配布サービスのストレージ機能を実装し、適切なアクセス制御を設定しました。また、RLSポリシーのテストとシードデータの追加も行いました。

## 変更内容

### ストレージバケットの作成
- `original_images`バケット：オリジナル画像用
  - 管理者のみアクセス可能
  - PNG/JPEG形式のみ許可
  - 50MBサイズ制限

- `watermarked_images`バケット：ウォーターマーク付き画像用
  - 認証済みユーザーが自身の画像を閲覧可能
  - Edge Functionからのアップロード許可
  - PNG/JPEG形式のみ許可
  - 50MBサイズ制限

### RLSポリシーの改善
- テーブルごとの適切なアクセス制御を実装
  - `profiles`：一般ユーザーは自身のプロファイルのみ更新可能
  - `images`：一般ユーザーは自身の画像のみ参照可能
  - `download_logs`：一般ユーザーは自身のログのみ作成可能

### テストとシードデータ
- RLSポリシーのテストを追加
  - 各テーブルのアクセス制御をテスト
  - ユーザーロールごとの権限確認

- シード画像のアップロード機能を追加
  - サンプル画像の自動生成
  - `original_images`バケットへのアップロード

## 動作確認済み項目
- [x] ローカル環境でのマイグレーション実行
  ```bash
  supabase db reset
  ```
- [x] RLSポリシーのテスト実行
  ```bash
  cd supabase && npm test
  ```
- [x] シード画像のアップロード
  ```bash
  cd supabase && npx ts-node seed_images.ts
  ```
- [x] 各ユーザーロールでのアクセス制御
  - 管理者：全ての操作が可能
  - 一般ユーザー：自身のリソースのみアクセス可能
  - 未認証ユーザー：アクセス不可

## 関連Issue
なし 