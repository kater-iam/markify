# Git運用の背景と詳細説明
このファイルは [git.mdc](../rules/git.mdc) のルールの背景と詳細を説明するものです。

1. ブランチ命名規則の背景 [→ルール](../rules/git.mdc#1)
   - 年月を含めることで、機能の開発時期を明確に把握できます
   - 作成者名を含めることで、責任の所在を明確にします
   - 機能名をハイフン区切りにすることで、可読性を向上させます
   - コマンド例：
     ```bash
     # 正しい例
     feature/$(date '+%Y%m')/yousan/add-user-auth
     
     # 誤った例
     feature/202402/yousan/addUserAuth  # 手動での日付入力
     feature/$(date '+%Y%m')/add-user-auth  # 作成者名の欠落
     ```

2. PRの作成ルールの背景 [→ルール](../rules/git.mdc#2)
   - 日本語での記述により、チーム全体での理解を促進します
   - 統一されたフォーマットにより、レビューの効率化を図ります
   - developブランチベースの運用により、リリース管理を確実にします
   - タイトル例：
     - ❌ "Add user authentication"
     - ⭕️ "ユーザー認証機能を追加"
     - ❌ "Fix database connection"
     - ⭕️ "データベース接続エラーを修正"

3. コミットメッセージフォーマットの背景 [→ルール](../rules/git.mdc#3)
   - 英語での記述により、国際的な開発環境への対応を可能にします
   - 統一されたフォーマットにより、変更履歴の追跡を容易にします
   - コミットメッセージ例：
     ```
     - add: user authentication feature
     - fix: database connection error
     - update database: add role column to profiles table
     ```

4. レビュー時の確認事項の詳細 [→ルール](../rules/git.mdc#4)
   - マイグレーションファイル
     - コメントの重要性：後から見返した際の理解を助けます
     - ロールバック考慮：問題発生時の対応を確実にします
   - ドキュメント
     - ER図更新：システム全体の把握を容易にします
     - 日本語での説明：チーム内での認識統一を図ります
   - セキュリティ
     - RLSポリシー：データアクセスの制御を確実にします
     - アクセス制御：情報セキュリティを担保します

5. 変更適用後の確認事項の詳細 [→ルール](../rules/git.mdc#5)
   - マイグレーション実行の確認ポイント
     - エラーなく実行できたか
     - ロールバックが正常に動作するか
   - シードデータ投入時の注意点
     - データが正しく挿入されているか
     - 制約違反が発生していないか
   - アプリケーション動作確認の重要性
     - 既存の機能が正常に動作するか
     - 新機能が期待通り動作するか
   - パフォーマンス確認の必要性
     - インデックスが適切に設定されているか
     - クエリのパフォーマンスに問題ないか

6. Gitコマンド実行時の注意点 [→ルール](../rules/git.mdc#6)
   - ページャー問題の背景
     - Gitコマンドの多くはデフォルトでページャー（less）を使用します
     - CI/CD環境やスクリプト実行時にプロンプトで停止する原因となります
   - `| cat` 付与の重要性
     - ページャーをバイパスし、出力を直接表示します
     - スクリプトの実行を中断することなく続行できます
   - 主な対象コマンド
     ```bash
     git log | cat    # コミット履歴の表示
     git diff | cat   # 差分の表示
     git show | cat   # 特定のコミットの詳細表示
     ```

# 補足情報

## 一般的な問題と解決策
- プロンプトの停止問題
  - 現象：コマンド実行時にプロンプトが停止し、処理が進まなくなる
  - 原因：`&&`で連結された複数のコマンドの実行時に、途中で停止する場合がある
  - 対策：コマンドを個別に実行し、実行前に現在の状態を確認する
- パスの解決問題
  - 現象：ファイルパスが見つからないエラー
  - 原因：カレントディレクトリが意図しないディレクトリになっている
  - 対策：`pwd`で確認し、適切なディレクトリに移動する
- Git操作の問題
  - 現象：ファイルの追加やコミットが失敗する
  - 原因：カレントディレクトリの問題や、パスの指定ミス
  - 対策：`git status`で状態確認し、プロジェクトルートから操作を行う

## 実行時の注意点
- コマンド実行前のチェックリスト
  - カレントディレクトリの確認
  - Gitブランチの確認
  - 必要なファイルの存在確認
- エラー発生時の対応手順
  - エラーメッセージの詳細確認
  - 環境変数やコンテナの状態確認
  - 必要に応じて個別のコマンドとして実行
- データ操作時の確認事項
  - バックアップの作成
  - テストデータの準備
  - 実行後の検証クエリの用意
  - ロールバック手順の確認 