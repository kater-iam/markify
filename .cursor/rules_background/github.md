# GitHubとPRに関するルール背景

このドキュメントは[github.mdc](./../rules/github.mdc)のルールの背景を説明するものです。

## 1. ベースブランチの指定
- PRは必ずGitHub上のデフォルトブランチ（現在はdevelop）宛に作成します
- mainブランチへのマージはリリース時のみとすることで、本番環境の安定性を確保します
- GitFlowに基づいたブランチング戦略に従います

## 2. PRのタイトル
- 日本語での記載により、チーム内でのコミュニケーションを円滑にします
- 例：
  - ❌ "Fix database"
  - ⭕️ "データベースマイグレーションの修正"

## 3. レビュワーの設定
自動レビュワーの設定により、以下の利点があります：
- Copilot: コードの品質チェック
- CodeRabbit: 自動コードレビュー
- チームメンバー: 人的なレビューによる知見の共有

## 4. PRの本文フォーマット
標準的なフォーマット：
```markdown
# 概要
変更の概要を簡潔に記載

# 変更内容
- 変更点1
- 変更点2
```

## 5. コマンドラインでのPR作成
一時ファイルを使用する方法：
```bash
# 一時ファイルにPRの本文を書く
cat > pr-body.md << 'EOF'
# 概要
変更内容の概要を書く

# 変更内容
- 変更点1
- 変更点2
EOF

# 一時ファイルの内容をPRの本文として使用
gh pr create --body "$(cat pr-body.md)"

# PRの本文を更新する場合
gh pr edit [PR番号] --body "$(cat pr-body.md)"

# 作業完了後は一時ファイルを削除
rm pr-body.md
```

# 補足情報

## PRの作成・更新手順
```bash
# 一時ファイルにPRの本文を作成
cat > pr-body.md << 'EOF'
# 概要
変更内容の概要を記載

# 変更内容
- 変更点1
- 変更点2

# 確認事項
- [ ] AIレビュワーのフィードバック対応
- [ ] チームメンバーのレビュー依頼
- [ ] 指摘事項の修正完了
EOF

# PR作成
gh pr create --base develop --title "変更内容を端的に表す日本語のタイトル" --body "$(cat pr-body.md)"

# レビュワーの設定
gh pr edit [PR番号] --add-reviewer "copilot, coderabbit, @teamMember"

# 一時ファイルの削除
rm pr-body.md
```

## GitHub操作時の注意点
- PRの作成前
  - ローカルの変更が完全にコミットされているか確認
  - ベースブランチが最新であることを確認
  - コンフリクトの有無を事前確認
- レビュー依頼時
  - AIレビュワーのフィードバックを待つ
  - チームメンバーへの特記事項を明記
  - 動作確認手順の記載
- マージ前
  - AIレビュワーの指摘事項対応
  - チームメンバーの承認確認
  - 最終的なコンフリクトチェック 